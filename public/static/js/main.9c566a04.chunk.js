(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{222:function(e,t,a){e.exports=a(401)},227:function(e,t,a){},228:function(e,t,a){},401:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),c=a.n(l),i=(a(227),a(23)),o=a(24),s=a(26),m=a(25),u=a(27),d=(a(228),a(405)),h=a(404),g=a(157),f=a(5),E=function(e){var t=e.searchNow,a=e.handleChange,n=e.filterSubmitted,l=e.logoWidth,c=e.searched,i=e.searchedWord,o=e.handleKeyPress,s=e.handleDelete;return r.a.createElement("div",{className:"main-search"},r.a.createElement("img",{width:l,src:"/img/logo.png",alt:"bdLogo"}),c?r.a.createElement("div",{style:{margin:"0 0 1rem 0"}},"Resultados relacionados a ",r.a.createElement("b",null,"'",i,"'")):r.a.createElement("p",null,"Un buscador de ",r.a.createElement("b",null,"algas "),"pensado para fic\xf3logos y no tan fic\xf3logos"),r.a.createElement("div",{className:"input-flex"},r.a.createElement(f.i,{className:"text-field",label:"Nombre del g\xe9nero o especie a buscar",variant:"outlined",name:"input",id:"main-search",onChange:a,onKeyPress:o}),r.a.createElement(f.b,{onClick:t,variant:"contained",color:"primary"},"Buscar")),Object.keys(n).length>0?r.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:"1rem"}},n.distribution&&n.distribution.length>0?r.a.createElement("div",{style:{margin:"0 1rem"}},r.a.createElement(f.c,{deleteIcon:"default",onDelete:function(){return s("distribution")},label:"Distribuci\xf3n: ".concat(n.distribution)})):"",n.lifeForms&&n.lifeForms.length>0?r.a.createElement("div",{style:{margin:"0 1rem"}},r.a.createElement(f.c,{deleteIcon:"default",onDelete:function(){return s("lifeForms")},label:"Formas de vida: ".concat(n.lifeForms)})):"",n.references&&n.references.length>0?r.a.createElement("div",{style:{margin:"0 1rem"}},r.a.createElement(f.c,{deleteIcon:"default",onDelete:function(){return s("references")},label:"Referencias: ".concat(n.references)})):"",n.others&&n.others.length>0?r.a.createElement("div",{style:{margin:"0 1rem"}},r.a.createElement(f.c,{deleteIcon:"default",onDelete:function(){return s("others")},label:"Otros registros: ".concat(n.others)})):"",n.ambient&&n.ambient.length>0?r.a.createElement("div",{style:{margin:"0 1rem"}},r.a.createElement(f.c,{deleteIcon:"default",onDelete:function(){return s("ambient")},label:"Ambiente: ".concat(n.ambient)})):"",n.taxonomic&&n.taxonomic.length>0?r.a.createElement("div",{style:{margin:"0 1rem"}},r.a.createElement(f.c,{deleteIcon:"default",onDelete:function(){return s("taxonomic")},label:"Comentario taxon\xf3mico: ".concat(n.taxonomic)})):""," "):"")},p=a(33),b=a.n(p),v="https://bdlacet.mx",C=function(e){return b.a.post("".concat(v,"/searchNow"),e,{}).then(function(e){return e}).catch(function(e){return e.response})},y=function(){return b.a.get(v+"/getAll").then(function(e){return e}).catch(function(e){return e.response})},w=a(156),x=a(153),P=a.n(x),S=a(154),L=a.n(S),O=function(e){var t=e.searched,a=e.handleFilters,l=e.applyFilters,c=Object(n.useState)(!1),i=Object(w.a)(c,2),o=i[0],s=i[1];return r.a.createElement(r.a.Fragment,null,t?r.a.createElement("div",{style:{marginTop:"1rem"}},r.a.createElement("div",{className:"toggle-filters",onClick:function(){return s(!o)}},r.a.createElement("p",null,o?r.a.createElement("span",{style:{display:"flex",alignItems:"center"}},"Ocultar filtros ",r.a.createElement(P.a,null)):r.a.createElement("span",{style:{display:"flex",alignItems:"center"}},"Mostrar filtros ",r.a.createElement(L.a,null)))),r.a.createElement("div",null,o?r.a.createElement("div",{className:"filtros"},r.a.createElement(f.h,{container:!0,alignItems:"flex-end"},r.a.createElement(f.h,{item:!0},r.a.createElement(f.i,{onChange:a,id:"distribution",label:"Distribuci\xf3n"}))),r.a.createElement(f.h,{container:!0,alignItems:"flex-end"},r.a.createElement(f.h,{item:!0},r.a.createElement(f.i,{onChange:a,id:"ambient",label:"Ambientes"}))),r.a.createElement(f.h,{container:!0,alignItems:"flex-end"},r.a.createElement(f.h,{item:!0},r.a.createElement(f.i,{onChange:a,id:"lifeForms",label:"Formas de vida"}))),r.a.createElement(f.h,{container:!0,alignItems:"flex-end"},r.a.createElement(f.h,{item:!0},r.a.createElement(f.i,{onChange:a,id:"others",label:"Otros registros"}))),r.a.createElement(f.h,{container:!0,alignItems:"flex-end"},r.a.createElement(f.h,{item:!0},r.a.createElement(f.i,{onChange:a,id:"taxonomic",label:"C. taxon\xf3mico"}))),r.a.createElement(f.h,{container:!0,alignItems:"flex-end"},r.a.createElement(f.h,{item:!0},r.a.createElement(f.i,{onChange:a,id:"references",label:"Referencias"}))),r.a.createElement("div",{style:{margin:"10px",width:"100%"}},r.a.createElement(f.b,{onClick:l,variant:"contained"},"Filtrar"))):"")):"")},k=a(17),I=a(58),j=a.n(I),F=a(59),N=a.n(F),B=a(46),D=a.n(B),W=a(60),R=a.n(W),A=a(61),M=a.n(A),T=a(32),K=a.n(T),X=a(22),U=a.n(X),q=a(97),J=a.n(q),z=a(99),Y=a.n(z),$=a(98),G=a.n($),H=a(96),Q=a.n(H),V=a(100),Z=a.n(V),_=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleFirstPageButtonClick=function(e){a.props.onChangePage(e,0)},a.handleBackButtonClick=function(e){a.props.onChangePage(e,a.props.page-1)},a.handleNextButtonClick=function(e){a.props.onChangePage(e,a.props.page+1)},a.handleLastPageButtonClick=function(e){a.props.onChangePage(e,Math.max(0,Math.ceil(a.props.count/a.props.rowsPerPage)-1))},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.count,n=e.page,l=e.rowsPerPage,c=e.theme;return r.a.createElement("div",{className:t.root},r.a.createElement(U.a,{onClick:this.handleFirstPageButtonClick,disabled:0===n,"aria-label":"First Page"},"rtl"===c.direction?r.a.createElement(Q.a,null):r.a.createElement(J.a,null)),r.a.createElement(U.a,{onClick:this.handleBackButtonClick,disabled:0===n,"aria-label":"Previous Page"},"rtl"===c.direction?r.a.createElement(G.a,null):r.a.createElement(Y.a,null)),r.a.createElement(U.a,{onClick:this.handleNextButtonClick,disabled:n>=Math.ceil(a/l)-1,"aria-label":"Next Page"},"rtl"===c.direction?r.a.createElement(Y.a,null):r.a.createElement(G.a,null)),r.a.createElement(U.a,{onClick:this.handleLastPageButtonClick,disabled:n>=Math.ceil(a/l)-1,"aria-label":"Last Page"},"rtl"===c.direction?r.a.createElement(J.a,null):r.a.createElement(Q.a,null)))}}]),t}(r.a.Component),ee=Object(k.withStyles)(function(e){return{root:{flexShrink:0,color:e.palette.text.secondary,marginLeft:2.5*e.spacing.unit}}},{withTheme:!0})(_),te=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={page:0,rowsPerPage:5},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({page:0,rowsPerPage:e.target.value})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.results,n=e.searched,l=e.filterSubmitted,c=void 0===l?{}:l,i=this.state,o=i.rowsPerPage,s=i.page,m=o-Math.min(o,a.length-s*o),u=a.filter(function(e){return c?(!c.distribution||e.custom2.toLowerCase().includes(c.distribution.toLowerCase()))&&(!c.lifeForms||e.custom4.toLowerCase().includes(c.lifeForms.toLowerCase()))&&(!c.references||e.custom1.toLowerCase().includes(c.references.toLowerCase()))&&(!c.others||e.custom5.toLowerCase().includes(c.others.toLowerCase()))&&(!c.ambient||e.custom3.toLowerCase().includes(c.ambient.toLowerCase()))&&(!c.taxonomic||e.misc1.toLowerCase().includes(c.taxonomic.toLowerCase())):e});return r.a.createElement(r.a.Fragment,null,n?r.a.createElement("div",{className:"transition-test",style:{margin:"1rem 0 3rem 0"}},a?r.a.createElement("div",{className:"results-quantity"},Object.keys(c).length>0?a.filter(function(e){return(!c.distribution||e.custom2.toLowerCase().includes(c.distribution.toLowerCase()))&&(!c.lifeForms||e.custom4.toLowerCase().includes(c.lifeForms.toLowerCase()))&&(!c.references||e.custom1.toLowerCase().includes(c.references.toLowerCase()))&&(!c.others||e.custom5.toLowerCase().includes(c.others.toLowerCase()))&&(!c.ambient||e.custom3.toLowerCase().includes(c.ambient.toLowerCase()))&&(!c.taxonomic||e.misc1.toLowerCase().includes(c.taxonomic.toLowerCase()))}).length:a.length," resultados"):"",r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(j.a,null,r.a.createElement(N.a,null,Object.keys(c).length>0?a.filter(function(e){return(!c.distribution||e.custom2.toLowerCase().includes(c.distribution.toLowerCase()))&&(!c.lifeForms||e.custom4.toLowerCase().includes(c.lifeForms.toLowerCase()))&&(!c.references||e.custom1.toLowerCase().includes(c.references.toLowerCase()))&&(!c.others||e.custom5.toLowerCase().includes(c.others.toLowerCase()))&&(!c.ambient||e.custom3.toLowerCase().includes(c.ambient.toLowerCase()))&&(!c.taxonomic||e.misc1.toLowerCase().includes(c.taxonomic.toLowerCase()))}).slice(s*o,s*o+o).map(function(e){return r.a.createElement(K.a,{key:e.title},r.a.createElement(f.e,{className:"panel-responsive"},r.a.createElement(f.g,{expandIcon:r.a.createElement(Z.a,null)},r.a.createElement(f.k,null,r.a.createElement("b",null,e?e.title.slice(1,-1):""))),r.a.createElement(f.f,{style:{backgroundColor:"#f7f7f7"}},r.a.createElement(f.k,{style:{textAlign:"left"}},r.a.createElement("p",null,r.a.createElement("b",null,"Nombre de la especie:")," ",e.title.slice(1,-1)),r.a.createElement("p",null,r.a.createElement("b",null,"Clasificaci\xf3n:")," ",e.notes.slice(1,-1)),r.a.createElement("p",null,r.a.createElement("b",null,"Comentarios taxon\xf3micos:")," ",e.misc1.slice(1,-1)),r.a.createElement("p",null,r.a.createElement("b",null,"Distribuci\xf3n, Localidades:")," ",e.custom2.slice(1,-1)),r.a.createElement("p",null,r.a.createElement("b",null,"Ambientes:")," ",e.custom3.slice(1,-1)),r.a.createElement("p",null,r.a.createElement("b",null,"Formas de vida:")," ",e.custom4.slice(1,-1)),r.a.createElement("p",null,r.a.createElement("b",null,"Otros registros:")," ",e.custom5.slice(1,-1)),r.a.createElement("p",null,r.a.createElement("b",null,"Referencias:"),e.custom1.slice(1,-1))))))}):a.slice(s*o,s*o+o).map(function(e){return r.a.createElement(K.a,{key:e.title},r.a.createElement(f.e,{className:"panel-responsive"},r.a.createElement(f.g,{expandIcon:r.a.createElement(Z.a,null)},r.a.createElement(f.k,null,r.a.createElement("b",null,e?e.title.slice(1,-1):""))),r.a.createElement(f.f,{style:{backgroundColor:"#f7f7f7"}},r.a.createElement(f.k,{style:{textAlign:"left"}},r.a.createElement("p",null,r.a.createElement("b",null,"Nombre de la especie:")," ",e.title.slice(1,-1)),r.a.createElement("p",null,r.a.createElement("b",null,"Clasificaci\xf3n:")," ",e.notes.slice(1,-1)),r.a.createElement("p",null,r.a.createElement("b",null,"Comentarios taxon\xf3micos:")," ",e.misc1.slice(1,-1)),r.a.createElement("p",null,r.a.createElement("b",null,"Distribuci\xf3n, Localidades:")," ",e.custom2.slice(1,-1)),r.a.createElement("p",null,r.a.createElement("b",null,"Ambientes:")," ",e.custom3.slice(1,-1)),r.a.createElement("p",null,r.a.createElement("b",null,"Formas de vida:")," ",e.custom4.slice(1,-1)),r.a.createElement("p",null,r.a.createElement("b",null,"Otros registros:")," ",e.custom5.slice(1,-1)),r.a.createElement("p",null,r.a.createElement("b",null,"Referencias:"),e.custom1.slice(1,-1))))))}),m>0&&r.a.createElement(K.a,{style:{height:48*m}},r.a.createElement(D.a,{colSpan:6}))),r.a.createElement(R.a,null,r.a.createElement(K.a,null,r.a.createElement(M.a,{className:"pagination",rowsPerPageOptions:[5,10,25],count:Object.keys(c).length>0?u.length:a.length,rowsPerPage:o,page:s,SelectProps:{native:!0},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,ActionsComponent:ee,labelRowsPerPage:"Resultados por p\xe1gina:",labelDisplayedRows:function(){return"".concat(s*o+1,"-").concat(Object.keys(c).length>0?s*o+parseInt(o)<u.length?s*o+parseInt(o):u.length:s*o+parseInt(o)<a.length?s*o+parseInt(o):a.length," de ").concat(Object.keys(c).length>0?u.length:a.length)}})))))):"")}}]),t}(r.a.Component),ae=Object(k.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},tableWrapper:{overflowX:"auto"}}})(te),ne=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={searchInput:{},searchedWord:"",results:[],searched:!1,logoWidth:"30%",filters:{},filterSubmitted:{}},a.handleChange=function(e){var t=a.state.searchInput;t[e.target.name]=e.target.value,a.setState({searchInput:t})},a.searchNow=function(e){e.preventDefault();var t=a.state.searchInput;document.getElementById("main-search")&&(""!==document.getElementById("main-search").value&&document.getElementById("main-search").value.length>3?C(t).then(function(e){a.setState({results:e.data,lengthErr:!1,logoWidth:"20%",searched:!0,searchedWord:t.input})}).catch(function(e){return console.log(e)}):a.setState({lengthErr:!0}))},a.handleKeyPress=function(e){"Enter"===e.key&&a.searchNow(e)},a.clearSearch=function(){document.getElementById("main-search").value="",a.setState({searchInput:{input:""},results:[],searched:!1,logoWidth:"30%",searchedWord:"",filters:{},filterSubmitted:{}})},a.handleFilters=function(e){var t=a.state.filters;t[e.target.id]=e.target.value,a.setState({filters:t})},a.applyFilters=function(){var e=a.state.filters;a.setState({filterSubmitted:Object(g.a)({},e)})},a.handleDelete=function(e){var t=a.state,n=t.filterSubmitted,r=t.filters;switch(e){case"distribution":return document.getElementById("distribution").value="",r.distribution="",n.distribution="",void a.setState({filterSubmitted:n,filters:r});case"lifeForms":return document.getElementById("lifeForms").value="",r.lifeForms="",n.lifeForms="",void a.setState({filterSubmitted:n,filters:r});case"references":return document.getElementById("references").value="",r.references="",n.references="",void a.setState({filterSubmitted:n,filters:r});case"others":return document.getElementById("others").value="",r.others="",n.others="",void a.setState({filterSubmitted:n,filters:r});case"ambient":return document.getElementById("ambient").value="",r.ambient="",n.ambient="",void a.setState({filterSubmitted:n,filters:r});case"taxonomic":return document.getElementById("taxonomic").value="",r.taxonomic="",n.taxonomic="",void a.setState({filterSubmitted:n,filters:r});default:return}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.searchInput,a=e.results,n=e.logoWidth,l=e.searched,c=e.searchedWord,i=e.filterSubmitted,o=e.lengthErr,s=this.handleChange,m=this.searchNow,u=(this.clearSearch,this.handleKeyPress),d=this.handleFilters,h=this.applyFilters,g=this.handleDelete;return r.a.createElement("div",{className:"background",style:{height:"100%"}},r.a.createElement(E,{searchInput:t,handleChange:s,searchNow:m,logoWidth:n,searched:l,searchedWord:c,handleKeyPress:u,filterSubmitted:i,handleDelete:g}),o?r.a.createElement("p",{style:{margin:"1rem 0",fontSize:"0.7rem"}},"Introducir m\xednimo 4 letras"):"",r.a.createElement(O,{handleFilters:d,applyFilters:h,searched:l}),r.a.createElement(ae,{filterSubmitted:i,results:a,searched:l,searchInput:t}))}}]),t}(n.Component),re=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={loaded:0,message:"",registers:{},xml:{},info:[],deleting:!1,creating:!1,done:!1},a.componentDidMount=function(){a.getInfo(),"bdlacet2019"!==prompt("Ingrese la contrase\xf1a")&&a.props.history.push("/")},a.handleFile=function(e){var t,n=a.state.xml;t=e.target.files[0];var r=new FileReader;r.readAsText(t,"UTF-8"),r.onload=function(e){n.data=e.target.result,a.setState({xml:n,loaded:0})}},a.sendFile=function(e){e.preventDefault();var t=a.state,n=t.xml;t.deleting,t.creating,t.done;0!==Object.keys(n).length&&(a.setState({deleting:!0}),b.a.get("https://bdlacet.mx/dropTable").then(function(e){a.setState({creating:!0}),b.a.get("https://bdlacet.mx/createTable").then(function(e){a.setState({done:!0}),b.a.post("https://bdlacet.mx/upload",n,{onUploadProgress:function(e){a.setState({loaded:e.loaded/e.total*100})}}).then(function(e){return a.setState({registers:e,message:"Cargado correctamente"})}).catch(function(e){return a.setState({message:e})})}).catch(function(e){return e})}).catch(function(e){return e}))},a.getInfo=function(){return y().then(function(e){return a.setState({info:e})}).catch(function(e){return console.log(e)})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.loaded,a=e.message,n=e.info,l=e.registers,c=e.deleting,i=e.creating,o=e.done,s=this.handleFile,m=this.sendFile;return r.a.createElement("div",null,r.a.createElement("h1",null,"Subir XML a la base de datos"),r.a.createElement("small",{style:{padding:"1rem"}},"Por favor, subir el archivo XML sin los siguientes caracteres en el contenido: (>), (<), (\"), ('), o (&). Ya que son caracteres especiales y pueden producir errores."),r.a.createElement("form",{style:{margin:"1rem 0"}},r.a.createElement("input",{type:"file",accept:"text/xml",onChange:s}),r.a.createElement("button",{onClick:m},"Subir")),c?r.a.createElement("div",null," ",r.a.createElement("p",null,"Por favor espere, vamos a preparar la base de datos. Esto puede demorar unos minutos.")," ",r.a.createElement("p",null,"Limpiando registros anteriores...")):"",i?r.a.createElement("div",null,"OK! ",r.a.createElement("br",null)," ",r.a.createElement("br",null)," Preparando la tabla..."):"",o?r.a.createElement("div",null,"OK!"):"",0!==t?r.a.createElement("div",null," ",r.a.createElement("p",null,Math.round(t,2)," %")," ",l.data?"":r.a.createElement("small",null,"Cargando XML, puede demorar varios segundos ",r.a.createElement(f.d,null)," ")," "):"",r.a.createElement("div",{style:{margin:"1rem 0"}},a||""),n.data||""===n.data?r.a.createElement("div",{style:{margin:"2rem 0 1rem 0"}},"Registros anteriores en la base de datos: ",n.data.length):r.a.createElement("div",null,"Cargando n\xfamero de registros... ",r.a.createElement(f.d,null)),l.data?r.a.createElement("div",{style:{margin:"1rem 0"}},r.a.createElement("p",null,"Registros cargados en la base de datos: ",l.data.affectedRows)):"")}}]),t}(n.Component),le=function(){return r.a.createElement(d.a,null,r.a.createElement(h.a,{exact:!0,path:"/",component:ne}),r.a.createElement(h.a,{path:"/upload",component:re}))},ce=a(62),ie=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=Object(k.createMuiTheme)({palette:{primary:ce.teal,secondary:{main:"#355C57"}}});return r.a.createElement("div",{className:"App"},r.a.createElement(k.MuiThemeProvider,{theme:e},r.a.createElement(le,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var oe=a(403);c.a.render(r.a.createElement(function(){return r.a.createElement(oe.a,null,r.a.createElement(ie,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[222,1,2]]]);
//# sourceMappingURL=main.9c566a04.chunk.js.map